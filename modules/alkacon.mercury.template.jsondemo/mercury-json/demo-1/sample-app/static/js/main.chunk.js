(this.webpackJsonpdemo1=this.webpackJsonpdemo1||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(6),a=n(2),c=n(3),s=n(5),o=n(4),r=n(1),l=n.n(r),h=n(8),d=n.n(h),u=n(0),j=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).demo=e.demo,i.content=e.content,i.alt=e.alt,i}return Object(c.a)(n,[{key:"imageUrl",get:function(){return this.demo.SERVER_IMAGE+this.content.Image.link}},{key:"render",value:function(){return!!this.content&&Object(u.jsx)("img",{src:this.imageUrl,alt:this.alt})}}]),n}(l.a.Component),m=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).demo=e.demo,i.content=e.content,i}return Object(c.a)(n,[{key:"caption",get:function(){return this.content.Caption}},{key:"image",get:function(){return this.content.Image}},{key:"text",get:function(){return this.content.Text}},{key:"title",get:function(){return this.content.Title}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:this.caption}),Object(u.jsx)(j,{demo:this.demo,content:this.image,alt:this.title}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:this.text}})]})}}]),n}(l.a.Component),b=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).demo=e.demo,c.content=e.content,c.mode=e.mode,c.handleClickDetail=c.handleClickDetail.bind(Object(i.a)(c)),c}return Object(c.a)(n,[{key:"author",get:function(){return this.localeContent.Author}},{key:"file",get:function(){return this.content.path}},{key:"intro",get:function(){return this.localeContent.Intro}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"paragraphs",get:function(){if(!this.localeContent.Paragraph)return!1;var e=this;return this.localeContent.Paragraph.map((function(t,n){return Object(u.jsx)(m,{demo:e.demo,content:t},n)}))}},{key:"title",get:function(){return this.localeContent.Title}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){return Object(u.jsxs)("section",{className:"detail",children:[Object(u.jsx)("h3",{children:this.title}),Object(u.jsxs)("h4",{children:["by ",this.author]}),Object(u.jsx)("h4",{children:this.intro}),this.paragraphs]})}},{key:"renderPreview",value:function(){var e=this,t=this.localeContent.Paragraph?this.localeContent.Paragraph[0].Image:null,n=this.title;return Object(u.jsxs)("div",{className:"list",children:[Object(u.jsx)(j,{demo:this.demo,content:t,alt:n}),Object(u.jsxs)("div",{children:[Object(u.jsx)("small",{children:"m-article"}),Object(u.jsx)("h3",{children:this.title}),Object(u.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),O=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).demo=e.demo,c.content=e.content,c.mode=e.mode,c.handleClickDetail=c.handleClickDetail.bind(Object(i.a)(c)),c}return Object(c.a)(n,[{key:"email",get:function(){var e=this.localeContent.Contact;return!(!e||!e.Email)&&e.Email.Email}},{key:"file",get:function(){return this.content.path}},{key:"firstName",get:function(){var e=this.localeContent.Name;return!!e&&e.FirstName}},{key:"image",get:function(){return this.localeContent.Image}},{key:"kind",get:function(){var e=this.content.localeContent.Kind;return e||!1}},{key:"lastName",get:function(){var e=this.localeContent.Name;return!!e&&e.LastName}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"locality",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.Locality;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.Locality;if(a)return a}return!1}},{key:"mobile",get:function(){var e=this.localeContent.Contact;return!!e&&e.Mobile}},{key:"organization",get:function(){return this.localeContent.Organization}},{key:"phone",get:function(){var e=this.localeContent.Contact;return!!e&&e.Phone}},{key:"position",get:function(){return this.localeContent.Position}},{key:"postalCode",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.PostalCode;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.PostalCode;if(a)return a}return!1}},{key:"streetAddress",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.StreetAddress;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.StreetAddress;if(a)return a}return!1}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){var e="person"===this.kind&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h4",{children:["Email: ",Object(u.jsx)("a",{href:"email:"+this.email,children:this.email})]}),Object(u.jsxs)("h4",{children:["Mobile: ",this.mobile]})]});return Object(u.jsxs)("section",{className:"detail",children:[Object(u.jsxs)("h3",{children:[this.firstName," ",this.lastName," ",Object(u.jsx)("small",{children:this.position})]}),Object(u.jsx)("h4",{children:Object(u.jsx)("strong",{children:this.organization})}),Object(u.jsx)("h4",{children:this.streetAddress}),Object(u.jsxs)("h4",{children:[this.postalCode," ",this.locality]}),Object(u.jsx)(j,{demo:this.demo,content:this.image,alt:this.firstName+" "+this.lastName+", "+this.position}),e,Object(u.jsxs)("h4",{children:["Phone: ",this.phone]})]})}},{key:"renderPreview",value:function(){var e=this,t="person"===this.kind?this.firstName+" "+this.lastName:this.organization;return Object(u.jsxs)("div",{className:"list",children:[Object(u.jsx)(j,{demo:this.demo,content:this.image,alt:t}),Object(u.jsxs)("div",{children:[Object(u.jsx)("small",{children:"m-contact"}),Object(u.jsx)("h3",{children:t}),Object(u.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),f=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).demo=e.demo,c.content=e.content,c.mode=e.mode,c.handleClickDetail=c.handleClickDetail.bind(Object(i.a)(c)),c}return Object(c.a)(n,[{key:"file",get:function(){return this.content.path}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"question",get:function(){return this.localeContent.Question}},{key:"paragraphs",get:function(){if(!this.localeContent.Paragraph)return!1;var e=this;return this.localeContent.Paragraph.map((function(t,n){return Object(u.jsx)(m,{demo:e.demo,content:t},n)}))}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){return Object(u.jsxs)("section",{className:"detail",children:[Object(u.jsx)("h3",{children:this.question}),this.paragraphs]})}},{key:"renderPreview",value:function(){var e=this,t=this.localeContent.Paragraph?this.localeContent.Paragraph[0].Image:null,n=this.question;return Object(u.jsxs)("div",{className:"list",children:[Object(u.jsx)(j,{demo:this.demo,content:t,alt:n}),Object(u.jsxs)("div",{children:[Object(u.jsx)("small",{children:"m-faq"}),Object(u.jsx)("h3",{children:this.question}),Object(u.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),v=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:"detail",children:[Object(u.jsx)("h3",{children:"You are almost there!"}),Object(u.jsx)("div",{className:"alert-info",children:"You do not see any contents here, since you did not yet activate the JSON API."})]}),Object(u.jsxs)("div",{className:"activation",children:[Object(u.jsx)("p",{children:"Activate the JSON API in the following way:"}),Object(u.jsxs)("ol",{children:[Object(u.jsxs)("li",{children:["Go to the Tomcat webapps directory where the OpenCms configuration files live, e.g., in ",Object(u.jsx)("code",{children:"[TOMCAT_HOME]/webapps/[OPENCMS]/WEB-INF/config/"}),"."]}),Object(u.jsxs)("li",{children:["Open the ",Object(u.jsx)("code",{children:"opencms-system.xml"})," configuration file with your favorite text editor."]}),Object(u.jsxs)("li",{children:["Add the ",Object(u.jsx)("code",{children:"org.opencms.xml.xml2json.CmsJsonResourceHandler"})," class at the end of the list of resource init handlers:",Object(u.jsx)("pre",{children:'[...]\n<resourceinit>\n  [...]\n  <resourceinithandler class="org.opencms.xml.xml2json.CmsJsonResourceHandler" />\n</resourceinit>\n[...]'})]}),Object(u.jsx)("li",{children:"Restart Tomcat."})]})]})]})}}]),n}(l.a.Component),C=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).view=e.view,i.state=e.state,i}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsx)("footer",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Demo using the OpenCms JSON API."}),Object(u.jsxs)("div",{className:"flex column",children:[Object(u.jsx)("a",{href:"https://documentation.opencms.org/opencms-documentation/more-opencms-features/headless-json-api/",target:"_blank",className:"doc",children:"Read the API Documentation"}),Object(u.jsx)("a",{href:"https://github.com/alkacon/mercury-json",target:"_blank",className:"github",children:"View the Demo Source on GitHub"})]})]})})}}]),n}(l.a.Component),p=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).title=e.title,i}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("header",{children:[Object(u.jsx)("h1",{children:this.title}),Object(u.jsxs)("h4",{children:[Object(u.jsx)("span",{children:"A demo single page application using "}),Object(u.jsx)("a",{href:"#",children:"OpenCms"}),"."]})]})}}]),n}(l.a.Component),x=(n(14),function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).demo1=e.demo1,i}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this,n=this.demo1.state.locale;return Object.keys(this.demo1.state.result).map((function(i){var a=t.demo1.state.result[i],c=i+n;return!!a.isXmlContent&&("m-article"===a.attributes.type?Object(u.jsx)(b,{demo:e.demo1,content:a,mode:"preview"},c):"m-contact"===a.attributes.type?Object(u.jsx)(O,{demo:e.demo1,content:a,mode:"preview"},c):"m-faq"===a.attributes.type?Object(u.jsx)(f,{demo:e.demo1,content:a,mode:"preview"},c):Object(u.jsx)("div",{children:"Unknown content type."}))}))}}]),n}(l.a.Component)),y=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).handleChange=c.handleChange.bind(Object(i.a)(c)),c.demo1=e.demo1,c}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.demo1.loadContentList(e.target.value)}},{key:"render",value:function(){var e=this,t=this,n=this.demo1.state.type,i=this.demo1.typeList.map((function(i){return Object(u.jsxs)("label",{className:"radio",children:[t.demo1.label[i],Object(u.jsx)("input",{type:"radio",name:"content",value:i,checked:n===i,onChange:e.handleChange}),Object(u.jsx)("span",{className:"checkmark"})]},i)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Content type"}),i]})}}]),n}(l.a.Component),k=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).handleClickList=c.handleClickList.bind(Object(i.a)(c)),c.demo1=e.demo1,c}return Object(c.a)(n,[{key:"handleClickList",value:function(e){e.preventDefault(),this.demo1.loadContentList(this.demo1.state.type)}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"back",children:Object(u.jsx)("a",{href:"#",onClick:this.handleClickList,children:"Back"})}),this.renderContent()]})}},{key:"renderContent",value:function(){return this.demo1.isTypeArticle()?Object(u.jsx)(b,{demo:this.demo1,content:this.demo1.state.result}):this.demo1.isTypeContact()?Object(u.jsx)(O,{demo:this.demo1,content:this.demo1.state.result}):this.demo1.isTypeFaq()?Object(u.jsx)(f,{demo:this.demo1,content:this.demo1.state.result}):Object(u.jsx)("div",{children:"Unknown content type."})}}]),n}(l.a.Component),g=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).demo1=e.demo1,i}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:"select",children:[Object(u.jsx)(y,{demo1:this.demo1}),Object(u.jsx)(A,{demo1:this.demo1})]}),Object(u.jsx)("section",{className:"content",children:Object(u.jsx)(x,{demo1:this.demo1})})]})}}]),n}(l.a.Component),A=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).handleChange=c.handleChange.bind(Object(i.a)(c)),c.demo1=e.demo1,c}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.demo1.loadContentList(this.demo1.state.type,e.target.value)}},{key:"render",value:function(){var e=this,t=this.demo1.state.locale,n=this.demo1.localeList.map((function(n){return Object(u.jsxs)("label",{className:"radio",children:[n,Object(u.jsx)("input",{type:"radio",name:"locale",value:n,checked:t===n,onChange:e.handleChange}),Object(u.jsx)("span",{className:"checkmark"})]},n)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Locale"}),n]})}}]),n}(l.a.Component),N=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;Object(a.a)(this,n),i=t.call(this,e);var c=document.getElementById("root").dataset.contextPath;return i.SERVER="${pageContext.request.contextPath}"===c?"":c,i.SERVER_IMAGE="",i.API_ENDPOINT=i.SERVER+"/json",i.CONTENT_FOLDER=i.API_ENDPOINT+"/sites/default/mercury-demo/.content/",i.PARAMS="?content&wrapper",i.TYPE_ARTICLE="article-m",i.TYPE_CONTACT="contact-m",i.TYPE_FAQ="faq-m",i.typeList=[i.TYPE_ARTICLE,i.TYPE_CONTACT,i.TYPE_FAQ],i.label={"article-m":"Article","contact-m":"Contact","faq-m":"FAQ"},i.localeList=["en","de"],i.state={available:null,type:i.TYPE_ARTICLE,content:null,result:{},locale:"en"},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.jsonApiAvailable()}},{key:"jsonApiAvailable",value:function(){var e=this,t=this;fetch(this.API_ENDPOINT).then((function(n){n.ok?(t.setState({available:!0,type:t.state.type,content:t.state.content,result:t.state.result,locale:t.state.locale}),e.loadContentList(e.state.type)):t.setState({available:!1,type:t.state.type,content:t.state.content,result:t.state.result,locale:t.state.locale})})).catch((function(e){t.setState({available:!1,type:t.state.type,content:t.state.content,result:t.state.result,locale:t.state.locale})}))}},{key:"loadContentDetail",value:function(e,t){var n=this;t||(t=this.state.locale);var i="&locale="+t+"&fallbackLocale",a=this.API_ENDPOINT+e+this.PARAMS+i;fetch(a).then((function(e){return e.json()})).then((function(i){n.setState({available:n.state.available,type:n.state.type,content:e,result:i,locale:t})}))}},{key:"loadContentList",value:function(e,t){var n=this;t||(t=this.state.locale);var i="&locale="+t+"&fallbackLocale",a=this.CONTENT_FOLDER+e+this.PARAMS+i;fetch(a).then((function(e){return e.json()})).then((function(i){n.setState({available:n.state.available,type:e,content:null,result:i,locale:t})}))}},{key:"isTypeArticle",value:function(){return this.state.type===this.TYPE_ARTICLE}},{key:"isTypeContact",value:function(){return this.state.type===this.TYPE_CONTACT}},{key:"isTypeFaq",value:function(){return this.state.type===this.TYPE_FAQ}},{key:"render",value:function(){var e;return e=null===this.state.available?Object(u.jsx)("div",{children:"Loading..."}):!1===this.state.available?Object(u.jsx)(v,{}):this.state.content?Object(u.jsx)(k,{demo1:this}):Object(u.jsx)(g,{demo1:this}),Object(u.jsx)("main",{children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(p,{title:"Demo 1"}),e,Object(u.jsx)(C,{})]})})}}]),n}(l.a.Component);d.a.render(Object(u.jsx)(N,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.chunk.js.map