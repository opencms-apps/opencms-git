(this.webpackJsonpdemo2=this.webpackJsonpdemo2||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n(3),s=n(6),c=n(5),o=n(4),r=n(1),l=n.n(r),h=n(8),d=n.n(h),j=n(0),u=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).demo=e.demo,a.content=e.content,a.alt=e.alt,a}return Object(a.a)(n,[{key:"imageUrl",get:function(){return this.demo.SERVER_IMAGE+this.content.Image.link}},{key:"render",value:function(){return!!this.content&&Object(j.jsx)("img",{src:this.imageUrl,alt:this.alt})}}]),n}(l.a.Component),m=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).demo=e.demo,a.content=e.content,a}return Object(a.a)(n,[{key:"caption",get:function(){return this.content.Caption}},{key:"image",get:function(){return this.content.Image}},{key:"text",get:function(){return this.content.Text}},{key:"title",get:function(){return this.content.Title}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:this.caption}),Object(j.jsx)(u,{demo:this.demo,content:this.image,alt:this.title}),Object(j.jsx)("div",{dangerouslySetInnerHTML:{__html:this.text}})]})}}]),n}(l.a.Component),b=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).demo=e.demo,a.content=e.content,a.mode=e.mode,a.handleClickDetail=a.handleClickDetail.bind(Object(s.a)(a)),a}return Object(a.a)(n,[{key:"author",get:function(){return this.localeContent.Author}},{key:"file",get:function(){return this.content.path}},{key:"intro",get:function(){return this.localeContent.Intro}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"paragraphs",get:function(){if(!this.localeContent.Paragraph)return!1;var e=this;return this.localeContent.Paragraph.map((function(t,n){return Object(j.jsx)(m,{demo:e.demo,content:t},n)}))}},{key:"title",get:function(){return this.localeContent.Title}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){return Object(j.jsxs)("section",{className:"detail",children:[Object(j.jsx)("h3",{children:this.title}),Object(j.jsxs)("h4",{children:["by ",this.author]}),Object(j.jsx)("h4",{children:this.intro}),this.paragraphs]})}},{key:"renderPreview",value:function(){var e=this,t=this.localeContent.Paragraph?this.localeContent.Paragraph[0].Image:null,n=this.title;return Object(j.jsxs)("div",{className:"list",children:[Object(j.jsx)(u,{demo:this.demo,content:t,alt:n}),Object(j.jsxs)("div",{children:[Object(j.jsx)("small",{children:"m-article"}),Object(j.jsx)("h3",{children:this.title}),Object(j.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),O=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).demo=e.demo,a.content=e.content,a.mode=e.mode,a.handleClickDetail=a.handleClickDetail.bind(Object(s.a)(a)),a}return Object(a.a)(n,[{key:"email",get:function(){var e=this.localeContent.Contact;return!(!e||!e.Email)&&e.Email.Email}},{key:"file",get:function(){return this.content.path}},{key:"firstName",get:function(){var e=this.localeContent.Name;return!!e&&e.FirstName}},{key:"image",get:function(){return this.localeContent.Image}},{key:"kind",get:function(){var e=this.content.localeContent.Kind;return e||!1}},{key:"lastName",get:function(){var e=this.localeContent.Name;return!!e&&e.LastName}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"locality",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.Locality;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.Locality;if(a)return a}return!1}},{key:"mobile",get:function(){var e=this.localeContent.Contact;return!!e&&e.Mobile}},{key:"organization",get:function(){return this.localeContent.Organization}},{key:"phone",get:function(){var e=this.localeContent.Contact;return!!e&&e.Phone}},{key:"position",get:function(){return this.localeContent.Position}},{key:"postalCode",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.PostalCode;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.PostalCode;if(a)return a}return!1}},{key:"streetAddress",get:function(){var e=this.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.StreetAddress;if(n){var i=n.path,a=this.content.linkedContents[i].localeContent.Address.StreetAddress;if(a)return a}return!1}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){var e="person"===this.kind&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h4",{children:["Email: ",Object(j.jsx)("a",{href:"email:"+this.email,children:this.email})]}),Object(j.jsxs)("h4",{children:["Mobile: ",this.mobile]})]});return Object(j.jsxs)("section",{className:"detail",children:[Object(j.jsxs)("h3",{children:[this.firstName," ",this.lastName," ",Object(j.jsx)("small",{children:this.position})]}),Object(j.jsx)("h4",{children:Object(j.jsx)("strong",{children:this.organization})}),Object(j.jsx)("h4",{children:this.streetAddress}),Object(j.jsxs)("h4",{children:[this.postalCode," ",this.locality]}),Object(j.jsx)(u,{demo:this.demo,content:this.image,alt:this.firstName+" "+this.lastName+", "+this.position}),e,Object(j.jsxs)("h4",{children:["Phone: ",this.phone]})]})}},{key:"renderPreview",value:function(){var e=this,t="person"===this.kind?this.firstName+" "+this.lastName:this.organization;return Object(j.jsxs)("div",{className:"list",children:[Object(j.jsx)(u,{demo:this.demo,content:this.image,alt:t}),Object(j.jsxs)("div",{children:[Object(j.jsx)("small",{children:"m-contact"}),Object(j.jsx)("h3",{children:t}),Object(j.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),f=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{className:"detail",children:[Object(j.jsx)("h3",{children:"You are almost there!"}),Object(j.jsx)("div",{className:"alert-info",children:"You do not see any contents here, since you did not yet activate the JSON API."})]}),Object(j.jsxs)("div",{className:"activation",children:[Object(j.jsx)("p",{children:"Activate the JSON API in the following way:"}),Object(j.jsxs)("ol",{children:[Object(j.jsxs)("li",{children:["Go to the Tomcat webapps directory where the OpenCms configuration files live, e.g., in ",Object(j.jsx)("code",{children:"[TOMCAT_HOME]/webapps/[OPENCMS]/WEB-INF/config/"}),"."]}),Object(j.jsxs)("li",{children:["Open the ",Object(j.jsx)("code",{children:"opencms-system.xml"})," configuration file with your favorite text editor."]}),Object(j.jsxs)("li",{children:["Add the ",Object(j.jsx)("code",{children:"org.opencms.xml.xml2json.CmsJsonResourceHandler"})," class at the end of the list of resource init handlers:",Object(j.jsx)("pre",{children:'[...]\n<resourceinit>\n  [...]\n  <resourceinithandler class="org.opencms.xml.xml2json.CmsJsonResourceHandler" />\n</resourceinit>\n[...]'})]}),Object(j.jsx)("li",{children:"Restart Tomcat."})]})]})]})}}]),n}(l.a.Component),v=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).view=e.view,a.state=e.state,a}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsx)("footer",{children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Demo using the OpenCms JSON API."}),Object(j.jsxs)("div",{className:"flex column",children:[Object(j.jsx)("a",{href:"https://documentation.opencms.org/opencms-documentation/more-opencms-features/headless-json-api/",target:"_blank",className:"doc",children:"Read the API Documentation"}),Object(j.jsx)("a",{href:"https://github.com/alkacon/mercury-json",target:"_blank",className:"github",children:"View the Demo Source on GitHub"})]})]})})}}]),n}(l.a.Component),C=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).title=e.title,a}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("header",{children:[Object(j.jsx)("h1",{children:this.title}),Object(j.jsxs)("h4",{children:[Object(j.jsx)("span",{children:"A demo single page application using "}),Object(j.jsx)("a",{href:"#",children:"OpenCms"}),"."]})]})}}]),n}(l.a.Component),x=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).demo=e.demo,a.content=e.content,a.mode=e.mode,a.handleClickDetail=a.handleClickDetail.bind(Object(s.a)(a)),a}return Object(a.a)(n,[{key:"file",get:function(){return this.content.path}},{key:"localeContent",get:function(){return this.content.localeContent?this.content.localeContent:this.content}},{key:"question",get:function(){return this.localeContent.Question}},{key:"paragraphs",get:function(){if(!this.localeContent.Paragraph)return!1;var e=this;return this.localeContent.Paragraph.map((function(t,n){return Object(j.jsx)(m,{demo:e.demo,content:t},n)}))}},{key:"handleClickDetail",value:function(e){this.demo.loadContentDetail(e)}},{key:"render",value:function(){return"preview"===this.mode?this.renderPreview():this.renderDefault()}},{key:"renderDefault",value:function(){return Object(j.jsxs)("section",{className:"detail",children:[Object(j.jsx)("h3",{children:this.question}),this.paragraphs]})}},{key:"renderPreview",value:function(){var e=this,t=this.localeContent.Paragraph?this.localeContent.Paragraph[0].Image:null,n=this.question;return Object(j.jsxs)("div",{className:"list",children:[Object(j.jsx)(u,{demo:this.demo,content:t,alt:n}),Object(j.jsxs)("div",{children:[Object(j.jsx)("small",{children:"m-faq"}),Object(j.jsx)("h3",{children:this.question}),Object(j.jsx)("a",{href:"#",onClick:function(t){return e.handleClickDetail(e.file,t)},children:"Read more"})]})]})}}]),n}(l.a.Component),k=(n(14),function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClickList=a.handleClickList.bind(Object(s.a)(a)),a.demo2=e.demo2,a}return Object(a.a)(n,[{key:"handleClickList",value:function(e){e.preventDefault(),this.demo2.loadList(this.demo2.state.sort,this.demo2.state.rows)}},{key:"render",value:function(){var e,t=this.demo2.state.content,n=t.properties.Title,i=t.attributes.type;return e="m-article"===i?Object(j.jsx)(b,{demo:this.demo2,content:t}):"m-contact"===i?Object(j.jsx)(O,{demo:this.demo2,content:t}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:n}),Object(j.jsxs)("p",{children:["Unknown detail type: ",i,"."]})]}),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"back",children:Object(j.jsx)("a",{href:"",onClick:this.handleClickList,children:"Back"})}),e]})}}]),n}(l.a.Component)),p=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClickContent=a.handleClickContent.bind(Object(s.a)(a)),a.handleShowMore=a.handleShowMore.bind(Object(s.a)(a)),a.demo2=e.demo2,a}return Object(a.a)(n,[{key:"handleClickContent",value:function(e){var t=e.path;this.demo2.loadContent(t)}},{key:"handleShowMore",value:function(e){this.demo2.loadListMore()}},{key:"render",value:function(){var e=this,t=this.demo2.state.list,n=t.list?t.list.map((function(t,n){var i=t.attributes.type,a=t.properties.Title+n;return"m-article"===i?Object(j.jsx)(b,{demo:e.demo2,content:t,mode:"preview"},a):"m-contact"===i?Object(j.jsx)(O,{demo:e.demo2,content:t,mode:"preview"},a):"m-faq"===i?Object(j.jsx)(x,{demo:e.demo2,content:t,mode:"preview"},a):Object(j.jsx)("div",{children:"Unknown content type."})})):null,i="",a=!0;t.listInfo&&(i+=(this.demo2.state.rows>t.listInfo.numFound?t.listInfo.numFound:this.demo2.state.rows)+"/"+t.listInfo.numFound,a=this.demo2.state.rows<t.listInfo.numFound);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{demo2:this.demo2}),n,Object(j.jsxs)("div",{className:"flex column",children:[Object(j.jsx)("h4",{children:i}),Object(j.jsx)("button",{onClick:this.handleShowMore,disabled:!a,children:Object(j.jsx)("big",{children:"Show more..."})})]})]})}}]),n}(l.a.Component),g=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(s.a)(a)),a.demo2=e.demo2,a}return Object(a.a)(n,[{key:"handleChange",value:function(e){this.demo2.loadList(e.target.value)}},{key:"render",value:function(){var e=this.demo2.state.sort;return Object(j.jsx)("section",{className:"select",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Sort by"}),Object(j.jsxs)("label",{className:"radio",children:["Date ascending",Object(j.jsx)("input",{type:"radio",value:"DATE_ASC",name:"sort",checked:"DATE_ASC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]}),Object(j.jsxs)("label",{className:"radio",children:["Date descending",Object(j.jsx)("input",{type:"radio",name:"sort",value:"DATE_DESC",checked:"DATE_DESC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]}),Object(j.jsxs)("label",{className:"radio",children:["Title ascending",Object(j.jsx)("input",{type:"radio",name:"sort",value:"TITLE_ASC",checked:"TITLE_ASC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]}),Object(j.jsxs)("label",{className:"radio",children:["Title descending",Object(j.jsx)("input",{type:"radio",name:"sort",value:"TITLE_DESC",checked:"TITLE_DESC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]}),Object(j.jsxs)("label",{className:"radio",children:["Order ascending",Object(j.jsx)("input",{type:"radio",name:"sort",value:"ORDER_ASC",checked:"ORDER_ASC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]}),Object(j.jsxs)("label",{className:"radio",children:["Order descending",Object(j.jsx)("input",{type:"radio",name:"sort",value:"ORDER_DESC",checked:"ORDER_DESC"===e,onChange:this.handleChange}),Object(j.jsx)("span",{className:"checkmark"})]})]})})}}]),n}(l.a.Component),y=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;Object(i.a)(this,n),a=t.call(this,e);var s=document.getElementById("root").dataset.contextPath;return a.SERVER="${pageContext.request.contextPath}"===s?"":s,a.SERVER_IMAGE="",a.ENDPOINT=a.SERVER+"/json",a.LIST="/sites/default/mercury-json/.content/list-m/list_00001.xml",a.PARAMS="?content&wrapper&locale=en&fallbackLocale",a.state={available:null,content:null,list:{},sort:"",rows:5},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.jsonApiAvailable()}},{key:"jsonApiAvailable",value:function(){var e=this,t=this;fetch(this.ENDPOINT).then((function(n){n.ok?(t.setState({available:!0,content:t.state.content,list:t.state.list,sort:t.state.sort,rows:t.state.rows}),e.loadList()):t.setState({available:!1,type:t.state.type,content:t.state.content,result:t.state.result,locale:t.state.locale})})).catch((function(e){t.setState({available:!1,content:t.state.content,list:t.state.list,sort:t.state.sort,rows:t.state.rows})}))}},{key:"loadContentDetail",value:function(e){var t=this,n=this.ENDPOINT+e+this.PARAMS;fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({available:t.state.available,content:e,list:t.state.list,sort:t.state.sort,rows:t.state.rows})}))}},{key:"loadList",value:function(e,t){var n=this,i=this.ENDPOINT+this.LIST+this.PARAMS;e&&(i+="&sort="+e),t||(t=5),i+="&rows="+t,fetch(i).then((function(e){return e.json()})).then((function(i){e||(e=i.SortOrder),n.setState({available:n.state.available,content:null,list:i,sort:e,rows:t})}))}},{key:"loadListMore",value:function(){var e=this.state.rows+5;this.loadList(this.state.sort,e)}},{key:"render",value:function(){var e;return e=null===this.state.available?Object(j.jsx)("div",{children:"Loading..."}):!1===this.state.available?Object(j.jsx)(f,{}):this.state.content?Object(j.jsx)(k,{demo2:this}):Object(j.jsx)(p,{demo2:this}),Object(j.jsx)("main",{children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(C,{title:"Demo 2"}),e,Object(j.jsx)(v,{})]})})}}]),n}(l.a.Component);d.a.render(Object(j.jsx)(y,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.chunk.js.map